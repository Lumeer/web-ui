<div class="header">
  <span [style.color]="data.collection.color" title="{{ data.collection.name }}">
    <i class="{{ data.collection.icon }} collection-icon"></i><!--
    --><label class="name">{{ data.collection.name }}</label>
  </span>

  <ng-container *ngIf="data.writeRole">
    <a tabindex
       class="editable"
       title="Edit Document" i18n-title="@@document.button.edit"
       (click)="setEditMode(true); select(0, 0)">
      <i class="fa fa-fw fa-pencil"></i>
    </a>
    <a tabindex
       class="editable remove"
       title="Remove Document" i18n-title="@@document.button.remove"
       (click)="onRemoveDocumentClick()">
      <i class="fa fa-fw fa-times"></i>
    </a>
  </ng-container>
</div>

<ul class="content" [style.cursor]="data.writeRole ? 'cell' : null" #content>

  <ng-container *ngIf="data.writeRole; then editableTable else nonEditableTable"></ng-container>

  <ng-template #editableTable>
    <li *ngFor="let attributePair of attributePairs; let row = index">
      <span id="AttributePair{{ data.index }}[0, {{ row }}]" class="attribute" tabindex="-1"
            (keydown)="onKeyDown($event)"
            (click)="clickOnAttributePair(0, row)">

        <input [ngModel]="attributePair.attribute"
               (ngModelChange)="updateAttribute(attributePair, $event)">
      </span>

      <span id="AttributePair{{ data.index }}[1, {{ row }}]" tabindex="-1"
            title="{{ attributePair.value }}"
            (keydown)="onKeyDown($event)"
            (click)="clickOnAttributePair(1, row)">

        <input [ngModel]="attributePair.value"
               (ngModelChange)="updateValue(attributePair, $event)">
      </span>
    </li>

    <li>
      <span id="AttributePair{{ data.index }}[0, {{ attributePairs.length }}]" class="attribute" tabindex="-1"
            (keydown)="onKeyDown($event)"
            (click)="clickOnAttributePair(0, attributePairs.length)">

        <!-- the list refers to one of the attribute suggestion lists in document perspective -->
        <input placeholder=" + "
               [attr.list]="data.document.collectionCode"
               [(ngModel)]="newAttributePair.attribute">
      </span>

      <span id="AttributePair{{ data.index }}[1, {{ attributePairs.length }}]"
            [attr.tabindex]="newAttributePair.attribute ? -1 : null"
            (keydown)="onKeyDown($event)"
            (click)="newAttributePair.attribute && clickOnAttributePair(1, attributePairs.length)">

        <input [disabled]="!newAttributePair.attribute"
               (keydown)="$event.key.length === 1 && createAttributePair($event.key)"/>
      </span>

    </li>
  </ng-template>

  <ng-template #nonEditableTable>
    <li *ngFor="let attributePair of attributePairs">
      <span class="attribute">
        <input readonly [ngModel]="attributePair.attribute">
      </span>

      <span>
        <input title="{{ attributePair.value }}" readonly [ngModel]="attributePair.value">
      </span>
    </li>
  </ng-template>
</ul>

<!-- additional buttons -->
<div class="edit">
  <a tabindex
     title="Details" i18n-title="@@document.button.details">
    <i class="fa fa-fw fa-search"></i>
  </a>

  <span class="secondary-edit d-flex">
    <a tabindex
       class="d-block"
       title="Incoming Links" i18n-title="@@document.button.links.incoming">
      <i class="fa fa-fw fa-sign-in"></i>
    </a>
    <a tabindex
       class="d-block"
       title="Outgoing Links" i18n-title="@@document.button.links.outgoing">
      <i class="fa fa-fw fa-sign-out"></i>
    </a>
    <a tabindex
       class="d-block"
       title="History" i18n-title="@@document.button.history">
      <i class="fa fa-fw fa-history"></i>
    </a>
  </span>
</div>
