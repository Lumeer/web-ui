<div class="header">
  <span [style.color]="collection.color" title="{{ collection.name }}">
    <i class="fa {{ collection.icon }} collection-icon"></i>
    <label class="name">{{ collection.name }}</label>
  </span>

  <ng-container *ngIf="editable">
    <a class="fa fa-fw fa-pencil editable" title="Edit Document" (click)="setEditMode(true); select(0, 0)"></a>
    <a class="fa fa-fw fa-times editable" title="Remove Document" (click)="onRemoveDocumentClick()"></a>
  </ng-container>
</div>

<ul class="content" [style.cursor]="editable ? 'cell' : ''" #content>
  <li *ngFor="let attributePair of attributePairs; let row = index">

    <ng-container *ngIf="editable; then editablePair else nonEditablePair"></ng-container>

    <ng-template #editablePair>
      <div id="AttributePair{{ index }}[0, {{ row }}]" class="attribute" tabindex="-1"
           title="{{ attributePair.attribute }}"
           (keydown)="onKeyDown($event)"
           (click)="clickOnAttributePair(0, row)">

        <ng2-completer [datasource]="suggestedAttributes"
                       [minSearchLength]="0"
                       [textNoResults]="null"
                       [ngModel]="attributePair.attribute"
                       (ngModelChange)="updateAttribute(attributePair, $event)"
                       (keydown)="onKeyDown($event)">
        </ng2-completer>
      </div>

      <div id="AttributePair{{ index }}[1, {{ row }}]" tabindex="-1"
           title="{{ attributePair.value }}"
           (keydown)="onKeyDown($event)"
           (click)="clickOnAttributePair(1, row)">

        <input [ngModel]="attributePair.value"
               (ngModelChange)="updateValue(attributePair, $event)"/>
      </div>
    </ng-template>

    <ng-template #nonEditablePair>
      <div class="attribute" title="{{ attributePair.attribute }}">
        <input [disabled]="true" [ngModel]="attributePair.attribute">
      </div>

      <div title="{{ attributePair.value }}">
        <input [disabled]="true" [ngModel]="attributePair.value">
      </div>
    </ng-template>

  </li>

  <li *ngIf="editable">
    <div id="AttributePair{{ index }}[0, {{ attributePairs.length }}]" class="attribute" tabindex="-1"
         (keydown)="onKeyDown($event)"
         (click)="clickOnAttributePair(0, attributePairs.length)">

      <ng2-completer placeholder=" + "
                     [datasource]="suggestedAttributes"
                     [minSearchLength]="0"
                     [textNoResults]="null"
                     [(ngModel)]="newAttributePair.attribute"
                     (keydown)="onKeyDown($event)">
      </ng2-completer>
    </div>

    <div id="AttributePair{{ index }}[1, {{ attributePairs.length }}]"
         [attr.tabindex]="newAttributePair.attribute ? -1 : ''"
         (keydown)="onKeyDown($event)"
         (click)="newAttributePair.attribute && clickOnAttributePair(1, attributePairs.length)">

      <input [disabled]="!newAttributePair.attribute"
             (keydown)="$event.key.length === 1 && createAttributePair($event.key)"/>
    </div>

  </li>
</ul>

<!-- additional buttons -->
<div class="edit">
  <span class="primary-edit">
    <a class="fa fa-fw fa-search" title="Details"></a>
  </span>

  <span class="secondary-edit">
    <!--the comments remove added space between icons-->
    <a class="fa fa-fw fa-sign-in" title="Incoming Links"></a><!--
    --><a class="fa fa-fw fa-sign-out" title="Outgoing Links"></a><!--
    --><a class="fa fa-fw fa-history" title="History"></a><!--
    --><a class="fa fa-fw fa-users" title="User Rights"></a>
  </span>
</div>
