<div class="header">
  <span [style.color]="collection.color" title="{{ collection.name }}">
    <i class="fa {{ collection.icon }} collection-icon"></i>
    <label class="name">{{ collection.name }}</label>
  </span>

  <ng-container *ngIf="editable">
    <a class="fa fa-fw fa-pencil editable" title="Edit Document" (click)="select(0, 0) && switchEditMode()"></a>
    <a class="fa fa-fw fa-times editable" title="Remove Document" (click)="onRemoveDocumentClick()"></a>
  </ng-container>
</div>

<ul class="content" #content
    [style.cursor]="editable ? 'cell' : ''">
  <li *ngFor="let attributePair of attributePairs; let row = index">

    <!--IDs follow the structure AttributePair{{ documentIndex }}[column, row]-->
    <div id="AttributePair{{ index }}[0, {{ row }}]" class="attribute"
         [attr.tabindex]="editable ? -1 : ''"
         (keydown)="editable && onKeyDown($event)"
         (click)="editable && select(0, row)">

      <ng2-completer [datasource]="suggestedAttributes"
                     [minSearchLength]="0"
                     [textNoResults]="null"
                     [disableInput]="!editable"
                     [ngModel]="attributePair.attribute"
                     (ngModelChange)="updateAttributePair(attributePair, $event)"
                     (keydown)="onKeyDown($event)">
      </ng2-completer>

    </div>

    <div id="AttributePair{{ index }}[1, {{ row }}]"
         [attr.tabindex]="editable ? -1 : ''"
         (keydown)="editable && onKeyDown($event)"
         (click)="editable && select(1, row)">

      <input [disabled]="!editable"
             [ngModel]="attributePair.value"
             (ngModelChange)="updateAttributePair(attributePair, $event)"/>

    </div>

  </li>

  <li *ngIf="editable">

    <div id="AttributePair{{ index }}[0, {{ attributePairs.length }}]" class="attribute"
         [attr.tabindex]="editable ? -1 : ''"
         (keydown)="editable && onKeyDown($event)"
         (click)="editable && select(0, attributePairs.length)">

      <ng2-completer placeholder=" + "
                     [datasource]="suggestedAttributes"
                     [minSearchLength]="0"
                     [textNoResults]="null"
                     [disableInput]="!editable"
                     [(ngModel)]="newAttributePair.attribute"
                     (keydown)="onKeyDown($event)">
      </ng2-completer>

    </div>

    <div id="AttributePair{{ index }}[1, {{ attributePairs.length }}]"
         [attr.tabindex]="newAttributePair.attribute && editable ? -1 : ''"
         (keydown)="editable && onKeyDown($event)"
         (click)="newAttributePair.attribute && editable && select(1, attributePairs.length)">

      <input [disabled]="!newAttributePair.attribute"
             (keydown)="$event.key.length === 1 && createAttributePair($event.key)"/>

    </div>

  </li>
</ul>

<!-- additional buttons -->
<div class="edit">
  <span class="primary-edit">
    <a class="fa fa-fw fa-search" title="Details"></a>
  </span>

  <span class="secondary-edit">
    <!--the comments remove added space between icons-->
    <a class="fa fa-fw fa-sign-in" title="Incoming Links"></a><!--
    --><a class="fa fa-fw fa-sign-out" title="Outgoing Links"></a><!--
    --><a class="fa fa-fw fa-history" title="History"></a><!--
    --><a class="fa fa-fw fa-users" title="User Rights"></a>
  </span>
</div>
