<div class="form-control d-flex w-100 p-0">
  <div class="d-flex flex-wrap w-100 pb-1 pr-1">
    <div class="query-item py-1 px-2 mt-1 ml-1"
         *ngFor="let queryItem of queryItems"
         [style.background-color]="queryItem.color">
      <i *ngIf="queryItem.icon" class="fa {{queryItem.icon}} mr-1" aria-hidden="true"></i>
      <span>{{queryItem.text}}</span>
    </div>

    <div class="dropdown" *ngIf="suggestions|async;let suggestionItems">
      <div class="dropdown-menu show suggestions"
           *ngIf="text && suggestionItems.length > 0">
        <div class="dropdown-item d-flex justify-content-between"
             *ngFor="let suggestion of suggestionItems"
             (click)="onSuggestionClick(suggestion)">
          <span>{{suggestion.text}}</span>
          <span>{{suggestion.type}}</span>
        </div>
      </div>
    </div>

    <!-- TODO remove once Angular supports ICU messages in attributes -->
    <div hidden>
      <span #inputPlaceholder i18n="@@search.input.placeholder">
        {queryItems.length, select, 0 {Type anything you search for...} other {}}
      </span>
    </div>

    <input class="border-0 flex-grow no-outline py-1 px-2 mt-1 ml-1"
           #searchBox
           [(ngModel)]="text"
           (keydown)="onKeyDown($event)"
           (keyup)="onKeyUp($event)"
           (focus)="suggest()"
           (blur)="hideSuggestions()"
           [placeholder]="removeHtmlComments(inputPlaceholder)"/>
  </div>

  <button class="btn search-button"
          type="button"
          title="Search" i18n-title="@@search.button"
          (click)="onButtonClick()">
    <i class="fa fa-search" aria-hidden="true"></i>
    <span class="d-none" i18n="@@search.button">Search</span>
  </button>
</div>
