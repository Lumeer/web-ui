<dialog-wrapper [submitDisabled]="!form.valid"
                [type]="'primary'"
                [width]="350"
                [showSubmit]="canShowContent()"
                (submit)="onSubmit()">
  <span class="title" i18n="@@resource.new.dialog.title">
  Create new {resourceType, select, organization {Organization} project {Project}}
  </span>

  <div class="body">
    <form [formGroup]="form"
          *ngIf="canShowContent(); else invalidResource">
      <div *ngIf="parentOrganization"
           [ngClass]="isFirstProject ? 'alert alert-warning' : null">
        <span *ngIf="isFirstProject" class="mr-2"
              i18n="@@resource.new.dialog.project.subtitle.first">Your organization is missing a project, create one first!</span>
        <span *ngIf="!isFirstProject" class="mr-2"
              i18n="@@resource.new.dialog.project.subtitle">Create project in organization:</span><br/>
        <i class="fa-fw {{ parentOrganization.icon }}"
           [style.color]="parentOrganization.color"></i>&nbsp;
        <span [style.color]="parentOrganization.color">[{{parentOrganization.code}}] {{parentOrganization.name}}</span>
      </div>

      <hr *ngIf="parentOrganization && !firstName"/>

      <div class="form-group">

        <label class="col-form-label text-muted"
               i18n="@@resource.new.dialog.icon.label">
          Click to set icon and color:
        </label>

        <icon-chooser [(color)]="color"
                      [(icon)]="icon"
                      class="d-block mb-3">
        </icon-chooser>
      </div>

      <resource-code-input
        [form]="form">
      </resource-code-input>

      <resource-name-input
        [form]="form">
      </resource-name-input>

    </form>

    <ng-template #invalidResource>
      <h4 class="text-danger text-center"
          i18n="@@resource.new.dialog.invalid">We are sorry, but something went wrong.
      </h4>
    </ng-template>

  </div>

  <span class="button-cancel" i18n="@@resource.new.dialog.button.cancel">Cancel</span>
  <span class="button-submit" i18n="@@resource.new.dialog.button.create">Create</span>

</dialog-wrapper>
