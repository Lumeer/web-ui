<ng-container
  *ngIf="{usersMap: usersMap$ | async, constraintData: constraintData$ | async, serviceLimits: serviceLimits$ | async} as data">
  <audit-log *ngFor="let auditLog of auditLogs; trackBy:trackByAudit; let first = first; let last = last"
             [auditLog]="auditLog"
             [parent]="parent"
             [first]="first"
             [last]="last"
             [constraintData]="data.constraintData"
             [allowRevert]="first && (data.serviceLimits && data.serviceLimits?.serviceLevel !== serviceLevel.FREE)"
             [usersMap]="data.usersMap"
             (revert)="onRevert(auditLog)">
  </audit-log>
  <div *ngIf="!data.serviceLimits || data.serviceLimits.serviceLevel === serviceLevel.FREE"
       class="py-3 mt-3 d-flex flex-column align-items-center text-center">
    <span i18n="@@document.detail.audit.limit">Limited to 3 entries. Upgrade to the Business license to see 2 weeks worth of history. For even longer history, contact us.</span>
    <button *ngIf="(organizationPermissions$ | async)?.manage"
            (click)="openServiceOrder()"
            class="btn btn-success mt-2">
      <span i18n="@@collection.config.tab.rules.upgradePlan">Upgrade to Business Plan!</span>
    </button>
  </div>
</ng-container>
