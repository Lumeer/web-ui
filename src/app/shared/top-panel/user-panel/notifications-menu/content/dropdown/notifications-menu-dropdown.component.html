<dropdown [pushOnScreen]="true"
          [origin]="origin"
          [positions]="dropdownPositions"
          [showBackdrop]="false">
  <div class="panel-item notifications card py-2 overflow-auto"
       [style.max-height.vh]="90"
       [style.width.rem]="18">
    <form class="px-2 text-right">
      <span class="small text-muted mr-1 align-text-top">Show only unread</span>
      <label class="switch">
        <input type="checkbox" [checked]="unreadOnly" (click)="toggleUnreadFilter($event)">
        <span class="slider round" (click)="$event.stopPropagation()"></span>
      </label>
    </form>

    <a *ngFor="let notification of (unreadOnly ? unreadNotifications : allNotifications);"
       class="dropdown-item cursor-default">
        <span class="notification-title clearfix">
          <span class="status small text-muted float-left">{{notification.createdAt | date:'shortDate' }}</span>
          <span class="status float-right"
                [class.read]="notification.read"
                [class.unread]="!notification.read">
            <span class="align-text-top small text-muted">
              <span *ngIf="!notification.firstReadAt" i18n="@@userNotifications.new">new</span>
              <span *ngIf="notification.read && notification.firstReadAt"
                    i18n="@@userNotifications.readOn">read on</span>
              <span *ngIf="!notification.read && notification.firstReadAt" i18n="@@userNotifications.originallyReadOn">originally read on</span>
              <span *ngIf="notification.firstReadAt">{{' ' + (notification.firstReadAt | date:'shortDate')}}</span>
            </span>
            <i *ngIf="notification.read"
               (click)="setNotificationReadEvent($event, notification, false)"
               class="fa fa-eye text-success ml-1 cursor-pointer"
               title="Mark as unread"
               i18n-title="@@userNotifications.mark.unread"></i>
            <i *ngIf="!notification.read"
               (click)="setNotificationReadEvent($event, notification, true)"
               class="fa fa-eye-slash text-success ml-1 cursor-pointer"
               title="Mark as read"
               i18n-title="@@userNotifications.mark.read"></i>
            <i (click)="deleteNotificationEvent($event, notification)"
               class="fa fa-trash text-danger ml-1 cursor-pointer"
               [class.disabled]="notification.deleting"
               title="Delete notification"
               i18n-title="@@userNotifications.delete"></i>
          </span>
        </span>
      <span class="notification-content cursor-pointer"
            (click)="navigateToTarget(notification)"
            [class.read]="notification.read"
            [class.text-notice]="notification.read"
            [class.unread]="!notification.read"
            [ngSwitch]="notification.type">

            <notification-organization *ngSwitchCase="notificationType.OrganizationShared"
                                       [organizations]="organizations"
                                       [notification]="notification">
            </notification-organization>

            <notification-project *ngSwitchCase="notificationType.ProjectShared"
                                  [organizations]="organizations"
                                  [workspace]="workspace"
                                  [notification]="notification">
            </notification-project>

            <notification-collection *ngSwitchCase="notificationType.CollectionShared"
                                     [organizations]="organizations"
                                     [workspace]="workspace"
                                     [currentProject]="currentProject"
                                     [notification]="notification">
            </notification-collection>

            <notification-view *ngSwitchCase="notificationType.ViewShared"
                               [organizations]="organizations"
                               [workspace]="workspace"
                               [currentProject]="currentProject"
                               [notification]="notification">
            </notification-view>

          <ng-container *ngSwitchDefault></ng-container>
        </span>
    </a>

    <div
      *ngIf="!(unreadOnly ? unreadNotifications : allNotifications) || (unreadOnly ? unreadNotifications : allNotifications).length === 0"
      class="px-4 py-1" i18n="@@userNotifications.empty">There are no notifications.
    </div>
  </div>
</dropdown>
