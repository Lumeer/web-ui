<div *ngIf="collections && collections.length === 0 && !(project | permissions:'write' | async)"
     class="alert alert-warning mt-2"
     i18n="@@search.result.empty">
  We are sorry, but we have not found anything. Please do a more accurate search.
</div>

<div *ngIf="(collections && collections.length > 0) || (project | permissions:'write' | async)">

  <div class="d-flex mt-2 mb-1">
    <post-it-collection-add-button
      class="ml-1"
      [disabled]="!(project | permissions:'write' | async)"
      (clicked)="newCollection()">
    </post-it-collection-add-button>

    <post-it-collection-import-button
      class="ml-2"
      [disabled]="!(project | permissions:'write' | async)"
      [i18n]="i18n"
      (error)="notifyOfError($event)"
      (import)="onImportCollection($event)">
    </post-it-collection-import-button>
  </div>

  <div class="post-it-collection-layout my-2">

    <post-it-collection
         class="layout-item" layout-item
         *ngFor="let collection of (maxShown > 0 ? (collections | slice:0:maxShown) : collections); trackBy:trackByCollection; let idx = index"
         [class.focused]="panelVisible && focusedPanel === idx"
         [class.selected]="selectedCollection === collection"
         [collection]="collection"
         [layout]="layout"
         [forceLayoutIndex]="idx"
         [focused]="panelVisible && focusedPanel === idx"
         [selected]="selectedCollection === collection"
         [workspace]="workspace"
         [userRoles]="getRoles(collection)"
         (resize)="forceLayout()"
         (select)="onCollectionSelect(collection)"
         (unselect)="onCollectionUnselect()"
         (update)="updateCollection($event)"
         (create)="createCollection($event)"
         (delete)="confirmDeletion(collection)"
         (favoriteChange)="onFavoriteChange(collection.id, $event)"
         (togglePanel)="togglePanelVisible($event, idx)">
    </post-it-collection>


    <div class="layout-item" layout-item
         *ngIf="maxShown > 0 && maxShown < collections.length"
         (click)="onShowAllClicked()"
         [layout]="layout"
         [forceLayoutIndex]="maxShown > 0 ? maxShown : null">
      <div class="see-all d-flex align-items-center justify-content-center cursor-pointer clickable"
           i18n="@@search.result.more">
        See all
      </div>
    </div>

  </div>

</div>
