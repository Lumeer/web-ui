<ng-container *ngIf="{columnGroups: tableModel.columns | groupTableColumns} as data">
  <table-alternative-header [columnGroups]="data.columnGroups"
                            [selectedCell]="selectedCell"
                            [editedCell]="editedCell">
  </table-alternative-header>
  <table-resize-header [columnGroups]="data.columnGroups"
                       (resizeColumn)="onResizeColumn($event)">
  </table-resize-header>
  <cdk-virtual-scroll-viewport lmrItemSize
                               (scroll)="onScroll()"
                               [style.height.%]="100"
                               [disabled]="scrollDisabled$ | async"
                               [columns]="tableModel.columns">
    <table class="table lmr-table position-relative">
      <thead table-header [columnGroups]="data.columnGroups"
             [selectedCell]="selectedCell"
             [editedCell]="editedCell"
             (dragStart)="scrollDisabled$.next(true)"
             (dragEnd)="scrollDisabled$.next(false)"
             (onClick)="onHeaderCellClick($event)"
             (onDoubleClick)="onHeaderCellDoubleClick($event)"
             (moveColumn)="onMoveColumn($event)"
             (onCancel)="onHeaderCancel($event)"
             (sortChanged)="columnSortChanged.emit($event)"
             (onRename)="columnRename.emit($event)"
             (menuSelected)="columnMenuSelected.emit($event)"
             (hiddenMenuSelected)="columnHiddenMenuSelected.emit($event)">
      </thead>
      <tbody>
      <tr table-row #tableRow
          *cdkVirtualFor="let row of tableModel.rows; let index = index; trackBy:trackByRow"
          [row]="row"
          [selectedCell]="selectedCell"
          [editedCell]="editedCell"
          [constraintData]="constraintData"
          [columnGroups]="data.columnGroups"
          (newValue)="onNewValue(row, $event)"
          (onClick)="onBodyCellClick(row, $event)"
          (onCancel)="onBodyCancel(row, $event)"
          (onDoubleClick)="onBodyCellDoubleClick(row, $event)"
          (menuSelected)="rowMenuSelected.emit($event)"
          (onDetail)="rowDetail.emit(row)">
      </tr>
      </tbody>
    </table>
  </cdk-virtual-scroll-viewport>
</ng-container>
