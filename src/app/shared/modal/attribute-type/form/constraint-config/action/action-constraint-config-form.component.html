<div [formGroup]="form">

  <div class="d-flex">
    <span class="text-muted" i18n="@@constraint.action.description">
      Defines action that can be executed based on defined conditions.
    </span>
  </div>

  <div class="form-group mt-3">
    <label i18n="@@constraint.action.rule.label">Rule</label>
    <select-item class="w-100 d-block"
                 [selectedId]="ruleControl.value"
                 [removable]="false"
                 emptyValue="Select rule"
                 i18n-emptyValue="@@constraint.action.rule.empty"
                 [items]="ruleSelectItems"
                 (select)="ruleControl.setValue($event)"
                 buttonClasses="flex-grow-1 text-truncate">
    </select-item>
  </div>

  <action-constraint-conditions-form class="d-block mt-2"
                                     [form]="filtersControl"
                                     [equation]="config?.equation"
                                     [resource]="resource">
  </action-constraint-conditions-form>

  <div class="form-group mt-2">
    <label [for]="formControlName.TitleUser"
           i18n="@@constraint.action.title.label">Button configuration</label>
    <input class="form-control"
           [formControlName]="formControlName.TitleUser"
           i18n-placeholder="@@contraint.action.title.placeholder"
           placeholder="Write custom title here"
           [id]="formControlName.TitleUser" type="text">
  </div>

</div>

<div class="d-flex align-items-center flex-column">

  <span class="small mb-1" i18n="@@constraint.action.color.label">Click on the button to set icon and color</span>

  <button class="btn text-truncate text-nowrap mw-100" [style.background]="colorControl.value"
          #buttonElement (click)="togglePicker()"
          [style.color]="colorControl.value | contrastColor">
    <ng-container><i [ngClass]="iconControl.value"></i>&nbsp;</ng-container>{{titleControl.value}}
  </button>

  <icon-color-picker [color]="colorControl.value"
                     [icon]="iconControl.value"
                     [origin]="buttonElement"
                     (preview)="onIconColorChange($event)"
                     (selected)="onIconColorChange($event)"
                     (cancel)="onIconColorChange($event)">
  </icon-color-picker>

</div>
