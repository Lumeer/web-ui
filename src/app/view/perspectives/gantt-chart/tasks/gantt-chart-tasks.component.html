<ng-container *ngIf="{mode: currentMode$ | async, tasks: tasks$ | async} as data">
  <ng-container *ngIf="{range: data.tasks | tasksInvalidRangeInfo} as invalidInfo">
    <ng-container *ngIf="!invalidInfo.range">
      <gantt-chart-header class="d-flex justify-content-end"
                          [currentMode]="data.mode"
                          (modeChange)="onModeChanged($event)">
      </gantt-chart-header>
      <gantt-chart-visualization
        [canManageConfig]="canManageConfig"
        [ganttChartId]="ganttChartId"
        [currentMode]="data.mode"
        [tasks]="data.tasks"
        (datesChange)="onDatesChanged($event)"
        (progressChange)="onProgressChanged($event)"
        (addDependency)="onAddDependency($event)"
        (removeDependency)="onRemoveDependency($event)">
      </gantt-chart-visualization>
    </ng-container>

    <gantt-chart-invalid-range *ngIf="invalidInfo.range"
                               [info]="invalidInfo.range">
    </gantt-chart-invalid-range>
  </ng-container>
</ng-container>
