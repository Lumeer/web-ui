<div class="card column" [style.width.px]="column.width" #cardWrapper>

  <div class="card-header p-0 mx-2"
       [class.cursor-move]="canManageConfig">
    <kanban-column-header [column]="column"
                          [collections]="collections"
                          [linkTypes]="linkTypes"
                          [summary]="summary"
                          (remove)="onRemoveColumn()">
    </kanban-column-header>
  </div>

  <div class="card-body py-1 px-2 my-1" cdkDropList id="{{column.id}}"
       #columnBody
       [cdkDropListData]="column"
       [cdkDropListConnectedTo]="dragColumnsIds"
       (cdkDropListDropped)="onDropPostIt($event)">
    <post-it *ngFor="let card of cards; trackBy: trackByCard; let last = last"
             cdkDrag
             id="{{postItIdPrefix}}#{{card.dataResource.id}}"
             class="post-it"
             [tag]="card.dueHours | kanbanDueHoursTag"
             [cdkDragDisabled]="!canManageConfig || !(card | kanbanPostItDraggable)"
             [cdkDragData]="card"
             [cdkDragStartDelay]="dragDelay"
             [layoutType]="config?.cardLayout"
             [class.mb-2]="!last"
             [dataResource]="card.dataResource"
             [resource]="card.resource"
             [query]="query"
             [canDrag]="canManageConfig && (card | kanbanPostItDraggable)"
             [allowedPermissions]="card.permissions"
             [constraintData]="constraintData"
             (toggleFavorite)="onToggleFavorite(card)">
    </post-it>

  </div>

  <div class="card-footer px-3 py-2 mx-2"
       *ngIf="{resources: config | filterWritableResources:collections:permissions} as footerData">
    <kanban-column-footer [resources]="footerData.resources"
                          [count]="cards?.length"
                          (selectResource)="createObjectInResource($event)">
    </kanban-column-footer>
  </div>

</div>
