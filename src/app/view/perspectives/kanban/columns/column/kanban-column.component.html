<div class="card" [style.width.px]="column.width" #cardWrapper>

  <div class="card-header p-0"
       [class.cursor-move]="canManageConfig">
    <kanban-column-header [column]="column">
    </kanban-column-header>
  </div>

  <div class="card-body p-3" cdkDropList id="{{column.id}}"
       #columnBody
       [cdkDropListData]="column"
       [cdkDropListConnectedTo]="dragColumnsIds"
       (cdkDropListDropped)="onDropPostIt($event)">
    <post-it-document
      *ngFor="let card of cards; trackBy: trackByCard; let idx = index; let last = last"
      cdkDrag
      id="{{columnSelectionId}}#{{card.resource.id}}"
      class="card post-it"
      [cdkDragDisabled]="!canManageConfig || !(card | kanbanPostItDraggable)"
      [cdkDragData]="card"
      [cdkDragStartDelay]="dragDelay"
      [class.mb-2]="!last"
      [documentModel]="card.resource"
      [collection]="collections | collectionById:card.resource.collectionId"
      [query]="query"
      [selectionHelper]="selectionHelper"
      [perspectiveId]="columnSelectionId"
      [canDrag]="canManageConfig && (card | kanbanPostItDraggable)"
      [index]="idx"
      [permissions]="permissions[card.resource.collectionId] || {}"
      (remove)="onRemoveDocument(card.resource)">
    </post-it-document>

  </div>

  <div class="card-footer px-3 py-2" *ngIf="{collections: column | filterWritableCollections:collections:permissions:config} as footerData">
    <kanban-column-footer *ngIf="footerData.collections.length > 0"
                          [collections]="footerData.collections"
                          (selectCollection)="createDocumentInCollection($event)">
    </kanban-column-footer>
  </div>

</div>
