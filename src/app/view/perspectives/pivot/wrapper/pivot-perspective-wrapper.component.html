<ng-container *ngIf="{pivotData: pivotData$ | async,
                      canManageConfig: currentView | canManageConfig | async} as data">

  <collapsible-sidebar *ngIf="data.canManageConfig"
                       [collapsed]="!sidebarOpened"
                       (toggle)="onSidebarToggle()">

    <pivot-config class="d-block m-3"
                  [config]="config"
                  [pivotData]="data.pivotData"
                  [collections]="collections"
                  [linkTypes]="linkTypes"
                  [query]="query"
                  (configChange)="onConfigChange($event)">
    </pivot-config>

  </collapsible-sidebar>

  <pivot-table class="flex-grow-1 h-100 overflow-auto ml-3"
               [config]="config"
               [pivotData]="data.pivotData">
  </pivot-table>

</ng-container>
