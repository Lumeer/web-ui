<ng-container *ngFor="let stem of query?.stems; let index = index; trackBy:trackByStem">

  <div class="text-nowrap" *ngIf="collections | collectionById:stem.collectionId as collection"
       [class.mt-5]="index > 0">
    <i [style.color]="collection.color" aria-hidden="true" class="{{collection.icon}} fa-fw"></i>&nbsp;
    <b>{{collection.name}}</b>
  </div>

  <pivot-config class="d-block mt-2"
                [pivotData]="config?.mergeTables ? pivotData?.data[0] : pivotData?.data[index]"
                [stem]="stem"
                [collections]="collections"
                [linkTypes]="linkTypes"
                [config]="config?.stemsConfigs && config?.stemsConfigs[index] || defaultStemConfig"
                (configChange)="onStemConfigChange($event, stem, index)">
  </pivot-config>

</ng-container>
