<div #editableCell
     tableEditableCell
     [cancelOnBlur]="!(attribute | entityCreated)"
     [disabledCharacters]="disabledCharacters"
     [readonly]="!allowedPermissions?.writeWithView"
     [selected]="selected$ | async"
     [value]="attribute | attributeLastName"
     (contextmenu)="onContextMenu($event)"
     (valueChange)="onValueChange($event)"
     (editStart)="onEditStart()"
     (editEnd)="onEditEnd($event)"
     (keydown)="onKeyDown($event)"
     (editKeyDown)="onEditKeyDown($event)"
     (mousedown)="onMouseDown()"
     class="table-border-right table-border-bottom h-100 font-italic"
     [class.uninitialized-column]="!column?.attributeIds[0]"
     [class.text-default-attribute]="collection ? (attribute | isDefaultAttribute: collection) : null"
     data-test="table-column-input">
</div>
<i *ngIf="(attribute?.constraint | constraintTypeIcon) as iconName"
   [ngClass]="iconName"
   [style.background-color]="background"
   [title]="attribute?.constraint | constraintTypeIconTitle"
   (click)="onContextMenu($event)"
   class="float-right position-relative"></i>

<table-attribute-suggestions *ngIf="edited && !(attribute | entityCreated) && !(attribute | attributeParentName)"
                             [attributeName]="attribute | attributeName:lastName"
                             [collection]="collection"
                             [linkType]="linkType"
                             [cursor]="cursor"
                             [table]="table"
                             [origin]="editableCell">
</table-attribute-suggestions>

<table-column-context-menu *ngIf="attribute && cursor"
                           [attribute]="attribute"
                           [cursor]="cursor"
                           [canManageConfig]="canManageConfig"
                           [allowedPermissions]="allowedPermissions"
                           [defaultAttribute]="collection ? (attribute | isDefaultAttribute: collection) : true"
                           [leaf]="leaf"
                           (add)="onAdd($event)"
                           (configure)="onConfigure()"
                           (functionEdit)="onFunctionEdit()"
                           (edit)="onEdit()"
                           (hide)="onHide()"
                           (remove)="onRemove()"
                           (setDefaultAttribute)="onSetDefaultAttribute()"
                           (split)="onSplit()">
</table-column-context-menu>
