<div *ngIf="query | displayable; else notDisplayable"
     (clickOutside)="onClickOutside($event)"
     class="flex-grow-1 d-flex flex-column m-0 h-100">
  <ng-container *ngIf="{canManageConfig: currentView$ | async | canManageConfig | async} as data">
    <table-hidden-input [canManageConfig]="data.canManageConfig"
                        [tableId]="tableId"
                        class="position-fixed">
    </table-hidden-input>

    <table-header [table]="table$ | async"
                  [canManageConfig]="data.canManageConfig"
                  cdkScrollable>
    </table-header>
    <table-body [tableId]="tableId"
                [query]="query"
                [canManageConfig]="data.canManageConfig"
                class="d-flex flex-grow-1">
    </table-body>
  </ng-container>
</div>

<ng-template #notDisplayable>
  <invalid-query class="w-100"
                 [minCollections]="1"
                 [maxCollections]="1">
  </invalid-query>
</ng-template>
