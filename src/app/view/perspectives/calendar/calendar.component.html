<div style="padding-left: 20em; padding-right: 20em; padding-top: 3em">
  <mwl-utils-calendar-header
    [(view)]="view"
    [(viewDate)]="viewDate">
  </mwl-utils-calendar-header>

  <ng-template
    #popContent>
      <div
        *ngFor="let event of shownEvents"
      >
        <i class="fa fa-circle" [style.color]="event.color.primary"></i>
        <b *ngIf="event.allDay !== true">
          {{event.start.toLocaleTimeString(undefined, {
            hour: '2-digit',
            minute: '2-digit'
            })
          }}
        </b>
        {{event.title}}
      </div>

  </ng-template>

  <ng-template
    #monthCellTemplate
    let-day="day"
    let-openDay="openDay"
    let-locale="locale"
    let-tooltipPlacement="tooltipPlacement"
    let-highlightDay="highlightDay"
    let-unhighlightDay="unhighlightDay"
    let-eventClicked="eventClicked">

    <div class="fill-height"
         [ngbPopover]="popContent"
         [popoverTitle]="day.date.toLocaleDateString(undefined, {
            day : 'numeric',
            month : 'short',
            year : 'numeric'
          })"
    >
      <div class="cal-cell-top">
        <span class="cal-day-badge" *ngIf="day.badgeTotal > 0">{{ day.badgeTotal }}</span>
        <span class="cal-day-number">{{ day.date | calendarDate:'monthViewDayNumber':locale }}</span>
      </div>
      <div class="cal-events">
        <div
          class="cal-event"
          *ngFor="let event of day.events"
          [style.backgroundColor]="event.color.primary"
          [ngClass]="event?.cssClass"
          (mouseenter)="highlightDay.emit({event: event})"
          (mouseleave)="unhighlightDay.emit({event: event})"
          [mwlCalendarTooltip]="event.title | calendarEventTitle:'monthTooltip':event"
          [tooltipPlacement]="tooltipPlacement"
          >
        </div>
      </div>
    </div>
  </ng-template>

  <ng-template #weekHeaderTemplate let-days="days" let-locale="locale" let-dayHeaderClicked="dayHeaderClicked">
    <div class="cal-day-headers">
      <div
        class="cal-header"
        *ngFor="let day of days"
        [class.cal-past]="day.isPast"
        [class.cal-today]="day.isToday"
        [class.cal-future]="day.isFuture"
        [class.cal-weekend]="day.isWeekend"
        (click)="dayHeaderClicked.emit({day: day})"
      >
        <b>{{ day.date | calendarDate:'weekViewColumnHeader':locale }}</b><br>
        <span>{{ day.date | calendarDate:'weekViewColumnSubHeader':locale }}</span>
      </div>
    </div>
  </ng-template>

  <ng-template #dayHourSegmentTemplate let-segment="segment" let-locale="locale">
    <div
      class="cal-hour-segment"
      [ngClass]="segment.cssClass"
      >
      <div [hidden]="!segment.isStart" class="cal-time">
        {{ segment.date | calendarDate:'dayViewHour':locale }}
      </div>
    </div>
  </ng-template>

  <br>
  <div [ngSwitch]="view">
    <mwl-calendar-month-view
      *ngSwitchCase="CalendarView.Month"
      [viewDate]="viewDate"
      [events]="events"
      [refresh]="refresh"
      (dayClicked)="dayClicked($event.day)"
      [cellTemplate]="monthCellTemplate"
      (eventTimesChanged)="eventTimesChanged($event)"
      >
    </mwl-calendar-month-view>
    <mwl-calendar-week-view
      *ngSwitchCase="CalendarView.Week"
      [viewDate]="viewDate"
      [events]="events"
      [refresh]="refresh"
      (dayClicked)="dayClicked($event.day)"
      [headerTemplate]="weekHeaderTemplate"
      (eventTimesChanged)="eventTimesChanged($event)">
    </mwl-calendar-week-view>
    <mwl-calendar-day-view
      *ngSwitchCase="CalendarView.Day"
      [viewDate]="viewDate"
      [events]="events"
      [refresh]="refresh"
      (dayClicked)="dayClicked($event.day)"
      [hourSegmentTemplate]="dayHourSegmentTemplate"
      (eventTimesChanged)="eventTimesChanged($event)">
    </mwl-calendar-day-view>
  </div>

  <br><br><br>

</div>
