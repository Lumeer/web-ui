<top-panel-wrapper>
  <div class="col-12 col-lg-11 col-xl-10 mx-auto content" *ngIf="collection$ | async as collection">
    <resource-header
      [resource]="collection"
      [resourceType]="collectionType"
      (back)="onBack()"
      (delete)="onDelete()"
      (colorIconChange)="onNewColorOrIcon($event)"
      (descriptionChange)="onNewDescription($event)"
      (nameChange)="onNewName($event)">
      <div class="d-flex flex-row text-primary flex-nowrap align-items-center mr-3"
           title="Number of users" i18n-title="@@collection.settings.users.count">
        <i class="far fa-user mr-1" aria-hidden="true"></i>
        <span>{{ userCount$ | async }}</span>
      </div>

      <div class="d-flex flex-row text-success flex-nowrap align-items-center cursor-pointer color-success"
           (click)="onDocumentsClick()"
           title="Number of records" i18n-title="@@collection.settings.records.count">
        <i class="far fa-file mr-1" aria-hidden="true"></i>
        <span>{{ collection.documentsCount }}</span>
      </div>

    </resource-header>

    <div class="d-flex flex-row-reverse text-right mb-3" *ngIf="(organizationAndProject | async) as realWorkspace">
      <div class="input-group input-group-sm w-auto">
        <div class="input-group-prepend">
          <span class="input-group-text align-items-end" i18n="@@collection.settings.tableId">Table ID:</span>
        </div>
        <input #tableId
               id="tableId"
               class="form-control"
               [class.copied]="copied | async"
               type="text"
               [readOnly]="true"
               [value]="(copied | async) ? copiedText : realWorkspace.organization.id + '/' + realWorkspace.project.id + '/' + collection.id">
        <div class="input-group-append">
          <span class="input-group-text cursor-pointer text-secondary" title="Copy to clipboard" i18n-title="@@collection.settings.clipboard.copy" (click)="copyTableId()">
            <i class="fas fa-copy"></i>
          </span>
        </div>
      </div>
    </div>

    <ul class="nav nav-tabs px-5">
      <li role="presentation" class="nav-item">
        <a [routerLink]="['attributes']"
           routerLinkActive="active"
           class="nav-link"
           i18n="@@collection.config.tab.attributes">
          Attributes
        </a>
      </li>
      <li role="presentation" class="nav-item">
        <a [routerLink]="['rules']"
           routerLinkActive="active"
           class="nav-link"
           i18n="@@collection.config.tab.rules">
          Rules
        </a>
      </li>
      <li role="presentation" class="nav-item">
        <a [routerLink]="['linktypes']"
           routerLinkActive="active"
           class="nav-link"
           i18n="@@collection.config.tab.link.types">
          Link Types
        </a>
      </li>
      <li role="presentation" class="nav-item">
        <a [routerLink]="['users']"
           routerLinkActive="active"
           class="nav-link"
           i18n="@@collection.config.tab.permissions">
          Users
        </a>
      </li>
    </ul>
    <router-outlet></router-outlet>
  </div>
</top-panel-wrapper>
